CREATE SCHEMA mydb;
use mydb;

create table s
(
номер_поставщика char(6) not null primary key,
фамилия nchar(20) null,
рейтинг int null,
город nchar(20) null
);
create table p
(
номер_детали char(6) not null primary key,
название nchar(20) null,
цвет nchar(20) null,
вес int null,
город nchar(20) null
);

create table j
(
номер_изделия char(6) not null primary key,
название nchar(20) null,
город nchar(20) null
);
create table spj
(
номер_поставщика char(6) null,
номер_детали char(6) null,
номер_изделия char(6) null,
количество int null,
constraint j foreign key (номер_изделия) references j (номер_изделия),
constraint p foreign key (номер_детали) references p (номер_детали),
constraint s foreign key (номер_поставщика) references s (номер_поставщика)
);

alter table spj add дата_поставки date null;

INSERT INTO s (номер_поставщика, фамилия, рейтинг, город) VALUES
('S1', 'Смит', 20, 'Лондон'),
('S2', 'Джонс', 10, 'Париж'),
('S3', 'Блейк', 30, 'Париж'),
('S4', 'Кларк', 20, 'Лондон'),
('S5', 'Адамс', 30, 'Афины');

INSERT INTO p (номер_детали, название, цвет, вес, город) VALUES
('P1', 'Гайка', 'Красный', 12, 'Лондон'),
('P2', 'Болт', 'Зеленый', 17, 'Париж'),
('P3', 'Винт', 'Голубой', 17, 'Рим'),
('P4', 'Винт', 'Красный', 14, 'Лондон'),
('P5', 'Кулачок', 'Голубой', 12, 'Париж'),
('P6', 'Блюм', 'Красный', 19, 'Лондон');

INSERT INTO j (номер_изделия, название, город) VALUES
('J1', 'Жесткий диск', 'Париж'),
('J2', 'Перфоратор', 'Рим'),
('J3', 'Считыватель', 'Афины'),
('J4', 'Принтер', 'Афины'),
('J5', 'Флоппи-диск', 'Лондон'),
('J6', 'Терминал', 'Осло'),
('J7', 'Лента', 'Лондон');

INSERT INTO spj (номер_поставщика, номер_детали, номер_изделия, количество, дата_поставки) VALUES
('S1', 'P1', 'J1', 200, '2022-05-24'),
('S1', 'P1', 'J4', 700, '2022-05-23'),
('S2', 'P3', 'J1', 400, '2022-05-22'),
('S2', 'P3', 'J2', 200, '2022-05-21'),
('S2', 'P3', 'J3', 200, '2022-05-20'),
('S2', 'P3', 'J4', 500, '2022-05-19'),
('S2', 'P3', 'J5', 600, '2022-05-17'),
('S2', 'P3', 'J6', 400, '2022-05-18'),
('S2', 'P3', 'J7', 800, '2022-05-17'),
('S2', 'P5', 'J2', 100, '2022-05-17'),
('S3', 'P1', 'J1', 200, '2022-05-18'),
('S3', 'P4', 'J2', 500, '2022-05-19'),
('S4', 'P6', 'J3', 300, '2022-05-20'),
('S4', 'P6', 'J7', 300, '2022-05-21'),
('S5', 'P2', 'J2', 200, '2022-05-22'),
('S5', 'P2', 'J4', 100, '2022-05-23'),
('S5', 'P5', 'J5', 500, '2022-05-24'),
('S5', 'P5', 'J7', 100, '2022-05-23'),
('S5', 'P6', 'J2', 200, '2022-05-23'),
('S5', 'P1', 'J4', 100, '2022-05-16'),
('S5', 'P3', 'J4', 200, '2022-05-16'),
('S5', 'P4', 'J4', 800, '2022-05-16'),
('S5', 'P5', 'J4', 400, '2022-05-17'),
('S5', 'P6', 'J4', 500, '2022-05-18');